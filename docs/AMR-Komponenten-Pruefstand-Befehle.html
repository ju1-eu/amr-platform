<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>AMR-Komponenten-Pruefstand-Befehle.mathjax_tmp</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="main-design.css" />
</head>
<body>
<div class="main-container">
<h1 id="befehls-liste-komponenten-prüfstand-v1.3">Befehls-Liste
Komponenten-Prüfstand (v1.3)</h1>
<blockquote>
<p><strong>Stand:</strong> 2025-12-12 | <strong>Firmware:</strong>
v0.3.0-serial | <strong>Phase:</strong> 1 ✅ Abgeschlossen</p>
</blockquote>
<hr />
<h2 id="übersicht-was-ist-validiert">Übersicht: Was ist validiert?</h2>
<table class="table table-compact">
<thead>
<tr>
<th>Komponente</th>
<th>Status</th>
<th>Bemerkung</th>
</tr>
</thead>
<tbody>
<tr>
<td>Raspberry Pi 5</td>
<td>✅</td>
<td>OS, Docker, Hailo erkannt</td>
</tr>
<tr>
<td>RPLIDAR A1</td>
<td>✅</td>
<td>7.5 Hz, TF korrekt</td>
</tr>
<tr>
<td>Kamera IMX296</td>
<td>✅</td>
<td>libcamera 0.3+</td>
</tr>
<tr>
<td>Hailo-8L</td>
<td>✅</td>
<td>31 FPS, HailoRT 4.23.0</td>
</tr>
<tr>
<td>ESP32-S3 XIAO</td>
<td>✅</td>
<td>Serial-Bridge Firmware</td>
</tr>
<tr>
<td>Motoren</td>
<td>✅</td>
<td>Teleop validiert</td>
</tr>
<tr>
<td>Differential Drive</td>
<td>✅</td>
<td>Links/Rechts drehen</td>
</tr>
<tr>
<td>Failsafe</td>
<td>✅</td>
<td>500ms Timeout</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="raspberry-pi-5-das-fundament">1. Raspberry Pi 5 — Das
Fundament</h2>
<h3 id="host-system-prüfen">1.1 Host-System prüfen</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> pi@rover</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># System aktualisieren</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt full-upgrade <span class="at">-y</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Temperatur prüfen (Ziel: &lt; 50°C Leerlauf)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">vcgencmd</span> measure_temp</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Hailo-8L erkennen</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="ex">lspci</span> <span class="kw">|</span> <span class="fu">grep</span> Hailo</span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>temp=48.3&#39;C
0001:01:00.0 Co-processor: Hailo Technologies Ltd. Hailo-8 AI Processor</code></pre>
<h3 id="docker-stack">1.2 Docker-Stack</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Projektstruktur</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span> ~/amr</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Erwartung: amr -&gt; /home/pi/amr-platform (Symlink)</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Container starten</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/amr-platform/docker</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose up <span class="at">-d</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Status prüfen</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose ps</span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>NAME               IMAGE                    STATUS
amr_perception     amr_perception:jazzy     Up
amr_serial_bridge  ros:jazzy-ros-base       Up</code></pre>
<hr />
<h2 id="esp32-s3-xiao-serial-bridge">2. ESP32-S3 XIAO —
Serial-Bridge</h2>
<h3 id="hardware-erkennung-auf-pi">2.1 Hardware-Erkennung (auf Pi)</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># USB-Gerät prüfen (ESP32-S3 = USB-CDC, kein CH340!)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsusb</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;espressif&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Serieller Port</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> /dev/ttyACM<span class="pp">*</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Rechte setzen (einmalig, danach Logout/Login)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> dialout <span class="va">$USER</span></span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>Bus 001 Device 003: ID 303a:1001 Espressif USB JTAG/serial debug unit
/dev/ttyACM0 existiert</code></pre>
<h3 id="firmware-flashen-auf-mac">2.2 Firmware flashen (auf Mac)</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/jan/daten/start/IoT/AMR/amr-platform/firmware_serial</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Kompilieren + Flashen</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">pio</span> run <span class="at">--target</span> upload</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Serial Monitor</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="ex">pio</span> device monitor</span></code></pre></div>
<p><strong>Erwartete Ausgabe:</strong></p>
<pre><code>AMR Serial-Bridge v0.3.0
Format: V:&lt;m/s&gt;,W:&lt;rad/s&gt;
READY</code></pre>
<p><strong>LED-Status nach Flash:</strong></p>
<table class="table table-compact">
<thead>
<tr>
<th>Muster</th>
<th>Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aufdimmen → Abdimmen</td>
<td>Boot-Animation</td>
</tr>
<tr>
<td>Langsames Pulsieren (Breathing)</td>
<td>Idle, wartet auf Befehle</td>
</tr>
<tr>
<td>Dauerlicht</td>
<td>Bewegung aktiv</td>
</tr>
<tr>
<td>Schnelles Blinken</td>
<td>Failsafe (Timeout)</td>
</tr>
</tbody>
</table>
<h3 id="manueller-serial-test-auf-mac">2.3 Manueller Serial-Test (auf
Mac)</h3>
<p>Im Serial Monitor eingeben (mit Newline):</p>
<pre><code>V:0.2,W:0.0</code></pre>
<p><strong>Erwartung:</strong> Beide Räder drehen vorwärts, Antwort:
<code>OK:0.200,0.000</code></p>
<pre><code>V:0.0,W:0.5</code></pre>
<p><strong>Erwartung:</strong> Roboter dreht sich (Differential Drive),
Antwort: <code>OK:0.000,0.500</code></p>
<pre><code>V:0.0,W:0.0</code></pre>
<p><strong>Erwartung:</strong> Stopp, Antwort:
<code>OK:0.000,0.000</code></p>
<h3 id="serial-bridge-container-starten-auf-pi">2.4 Serial-Bridge
Container starten (auf Pi)</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/amr-platform/docker</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Container starten</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose up <span class="at">-d</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Logs prüfen</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose logs <span class="at">-f</span> serial_bridge</span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>[INFO] [serial_bridge]: Serial Bridge gestartet: /dev/ttyACM0 @ 115200 baud
[INFO] [serial_bridge]: ESP32 bereit</code></pre>
<h3 id="motor-test-via-ros-2">2.5 Motor-Test via ROS 2</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In einem neuen Terminal</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> amr_perception bash</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /opt/ros/jazzy/setup.bash</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Node prüfen</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> node list</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Erwartung: /serial_bridge</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Motor vorwärts (0.2 m/s)</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic pub /cmd_vel geometry_msgs/Twist <span class="st">&quot;{linear: {x: 0.2}}&quot;</span> <span class="at">--once</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Motor rückwärts</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic pub /cmd_vel geometry_msgs/Twist <span class="st">&quot;{linear: {x: -0.2}}&quot;</span> <span class="at">--once</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Drehung links</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic pub /cmd_vel geometry_msgs/Twist <span class="st">&quot;{angular: {z: 0.5}}&quot;</span> <span class="at">--once</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Drehung rechts</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic pub /cmd_vel geometry_msgs/Twist <span class="st">&quot;{angular: {z: -0.5}}&quot;</span> <span class="at">--once</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Stopp</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic pub /cmd_vel geometry_msgs/Twist <span class="st">&quot;{}&quot;</span> <span class="at">--once</span></span></code></pre></div>
<h3 id="teleop-test-empfohlen">2.6 Teleop-Test (empfohlen)</h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> amr_perception bash</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /opt/ros/jazzy/setup.bash</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> run teleop_twist_keyboard teleop_twist_keyboard</span></code></pre></div>
<p><strong>Tasten:</strong></p>
<table class="table table-compact">
<thead>
<tr>
<th>Taste</th>
<th>Aktion</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>i</code></td>
<td>Vorwärts</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Rückwärts</td>
</tr>
<tr>
<td><code>j</code></td>
<td>Links drehen</td>
</tr>
<tr>
<td><code>l</code></td>
<td>Rechts drehen</td>
</tr>
<tr>
<td><code>k</code></td>
<td>Stopp</td>
</tr>
<tr>
<td><code>q</code>/<code>z</code></td>
<td>Geschwindigkeit +/-</td>
</tr>
</tbody>
</table>
<h3 id="failsafe-test">2.7 Failsafe-Test</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Serial-Bridge Container stoppen</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose stop serial_bridge</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Beobachten: LED muss schnell blinken, Motoren stoppen nach 500ms</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Container wieder starten</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose start serial_bridge</span></code></pre></div>
<hr />
<h2 id="rplidar-a1-lidar-sensor">3. RPLIDAR A1 — LiDAR-Sensor</h2>
<h3 id="hardware-check">3.1 Hardware-Check</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># USB-Erkennung (Silicon Labs CP210x)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lsusb</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-i</span> <span class="st">&quot;silicon&quot;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Serieller Port</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span> /dev/ttyUSB0</span></code></pre></div>
<h3 id="ros-2-node-starten">3.2 ROS 2 Node starten</h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> amr_perception bash</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /opt/ros/jazzy/setup.bash</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># LiDAR starten</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> launch rplidar_ros rplidar.launch.py frame_id:=laser_frame</span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<ul>
<li>Motor dreht hörbar</li>
<li>Keine “Operation timeout” Fehler</li>
</ul>
<h3 id="daten-prüfen">3.3 Daten prüfen</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In neuem Terminal</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> amr_perception bash</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scan-Rate prüfen</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic hz /scan</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Erwartung: average rate: 7.5 Hz</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten ansehen</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> topic echo /scan <span class="at">--once</span></span></code></pre></div>
<hr />
<h2 id="kamera-imx296-hailo-8l">4. Kamera (IMX296) &amp; Hailo-8L</h2>
<h3 id="kamera-erkennung">4.1 Kamera-Erkennung</h3>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kernel-Log</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dmesg <span class="kw">|</span> <span class="fu">grep</span> imx296</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Kamera-Liste (neue Befehle für Bookworm!)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="ex">rpicam-hello</span> <span class="at">--list-cameras</span></span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>Available cameras
-----------------
0 : imx296 [1456x1088 10-bit MONO] (/base/soc/i2c0mux/...)</code></pre>
<h3 id="hailo-validierung">4.2 Hailo-Validierung</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Version prüfen (MUSS 4.23.0 sein!)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">hailortcli</span> <span class="at">--version</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Firmware prüfen</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">hailortcli</span> fw-control identify</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Benchmark</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/hailo_models</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="ex">hailortcli</span> benchmark yolov5s.hef</span></code></pre></div>
<p><strong>Erwartetes Ergebnis:</strong></p>
<pre><code>HailoRT: 4.23.0
Firmware Version: 4.23.0
FPS: ~31, Latency: ~30ms</code></pre>
<hr />
<h2 id="tf-baum-validieren">5. TF-Baum validieren</h2>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-it</span> amr_perception bash</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /opt/ros/jazzy/setup.bash</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Robot State Publisher starten</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> launch amr_description display.launch.py</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># In neuem Terminal: TF prüfen</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ros2</span> run tf2_ros tf2_echo base_link laser_frame</span></code></pre></div>
<p><strong>Erwartete Translation:</strong></p>
<pre><code>Translation: [0.060, 0.000, 0.045]</code></pre>
<hr />
<h2 id="git-workflow">6. Git-Workflow</h2>
<h3 id="auf-dem-mac-entwickeln">6.1 Auf dem Mac entwickeln</h3>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /Users/jan/daten/start/IoT/AMR/amr-platform</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Vor der Arbeit</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin main</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nach Änderungen</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;feat: Beschreibung&quot;</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre></div>
<h3 id="auf-dem-pi-deployen">6.2 Auf dem Pi deployen</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/amr-platform</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin main</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Container neu starten (falls Docker-Dateien geändert)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> docker</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose down</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose up <span class="at">-d</span></span></code></pre></div>
<hr />
<h2 id="status-checkliste-phase-1">Status-Checkliste Phase 1 ✅</h2>
<h3 id="esp32-serial-bridge-firmware">ESP32 Serial-Bridge Firmware</h3>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />ESP32-S3 XIAO an Pi
angeschlossen</label></li>
<li><label><input type="checkbox" checked="" /><code>/dev/ttyACM0</code>
erkannt</label></li>
<li><label><input type="checkbox" checked="" />Firmware v0.3.0-serial
geflasht</label></li>
<li><label><input type="checkbox" checked="" />LED Boot-Animation
sichtbar</label></li>
<li><label><input type="checkbox" checked="" />LED Breathing
(Idle)</label></li>
<li><label><input type="checkbox" checked="" />Serial-Bridge Container
verbunden</label></li>
<li><label><input type="checkbox"
checked="" /><code>/serial_bridge</code> Node sichtbar</label></li>
<li><label><input type="checkbox" checked="" />Motor vorwärts
funktioniert</label></li>
<li><label><input type="checkbox" checked="" />Motor rückwärts
funktioniert</label></li>
<li><label><input type="checkbox" checked="" />Drehung links
funktioniert</label></li>
<li><label><input type="checkbox" checked="" />Drehung rechts
funktioniert</label></li>
<li><label><input type="checkbox" checked="" />Failsafe-Test bestanden
(500ms Timeout)</label></li>
<li><label><input type="checkbox" checked="" />Teleop-Test
bestanden</label></li>
</ul>
<h3 id="cytron-mdd3a-verkabelung">Cytron MDD3A Verkabelung</h3>
<table class="table table-compact">
<thead>
<tr>
<th>ESP32 Pin</th>
<th>MDD3A</th>
<th>Funktion</th>
</tr>
</thead>
<tbody>
<tr>
<td>D0</td>
<td>M1A</td>
<td>Motor Links Vorwärts</td>
</tr>
<tr>
<td>D1</td>
<td>M1B</td>
<td>Motor Links Rückwärts</td>
</tr>
<tr>
<td>D2</td>
<td>M2A</td>
<td>Motor Rechts Vorwärts</td>
</tr>
<tr>
<td>D3</td>
<td>M2B</td>
<td>Motor Rechts Rückwärts</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
<td>Masse</td>
</tr>
</tbody>
</table>
<p><strong>Wichtig:</strong> MDD3A nutzt <strong>Dual-PWM</strong>,
NICHT PWM+DIR!</p>
<hr />
<h2 id="performance-zusammenfassung">Performance-Zusammenfassung</h2>
<table class="table table-compact">
<thead>
<tr>
<th>Komponente</th>
<th>Metrik</th>
<th>Wert</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hailo-8L</strong></td>
<td>FPS</td>
<td>31.32</td>
<td>✅</td>
</tr>
<tr>
<td></td>
<td>Latenz</td>
<td>29.73 ms</td>
<td>✅</td>
</tr>
<tr>
<td><strong>RPLIDAR A1</strong></td>
<td>Scan-Rate</td>
<td>7.5 Hz</td>
<td>✅</td>
</tr>
<tr>
<td></td>
<td>Range</td>
<td>0.19–4.0 m</td>
<td>✅</td>
</tr>
<tr>
<td><strong>ESP32 Firmware</strong></td>
<td>Version</td>
<td>v0.3.0-serial</td>
<td>✅</td>
</tr>
<tr>
<td></td>
<td>Failsafe</td>
<td>500 ms</td>
<td>✅</td>
</tr>
<tr>
<td></td>
<td>PWM Deadzone</td>
<td>35 (kompensiert)</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Serial Bridge</strong></td>
<td>Send-Rate</td>
<td>20 Hz</td>
<td>✅</td>
</tr>
<tr>
<td></td>
<td>Latenz</td>
<td>&lt; 50 ms</td>
<td>✅</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="fehlerbehebung">Fehlerbehebung</h2>
<h3 id="esp32-wird-nicht-erkannt">ESP32 wird nicht erkannt</h3>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boot-Modus erzwingen:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. BOOT-Taste gedrückt halten</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. RESET-Taste drücken und loslassen</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. BOOT-Taste loslassen</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. pio run --target upload</span></span></code></pre></div>
<h3 id="serial-bridge-verbindet-nicht">Serial-Bridge verbindet
nicht</h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Container-Logs prüfen</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose logs serial_bridge</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Device durchgereicht?</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec amr_serial_bridge ls <span class="at">-la</span> /dev/ttyACM0</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Neustart</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose restart serial_bridge</span></code></pre></div>
<h3 id="motor-dreht-nicht">Motor dreht nicht</h3>
<ol type="1">
<li><strong>12V Versorgung messen</strong> (Multimeter am Cytron
VIN)</li>
<li><strong>PWM-Signal prüfen</strong> (LED an D0/D2)</li>
<li><strong>Cytron Status-LED</strong> (Grün = OK, Rot = Fehler)</li>
<li><strong>Deadzone prüfen</strong> (PWM muss &gt; 35 sein, wird
automatisch kompensiert)</li>
</ol>
<h3 id="motoren-stoppen-sofort-failsafe">Motoren stoppen sofort
(Failsafe)</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Serial-Bridge Logs prüfen</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose logs <span class="at">-f</span> serial_bridge</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Heartbeat-Problem: Bridge sendet nicht kontinuierlich</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># → Container neu starten</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose restart serial_bridge</span></code></pre></div>
<h3 id="alter-container-blockiert">Alter Container blockiert</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alle Container stoppen und entfernen</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose down</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Neu starten</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> compose up <span class="at">-d</span></span></code></pre></div>
<hr />
<h2 id="nächste-schritte-phase-2">Nächste Schritte: Phase 2</h2>
<table class="table table-compact">
<thead>
<tr>
<th>Phase</th>
<th>Aufgabe</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>ESP32 Serial-Bridge, Motor-Test, Teleop</td>
<td>✅ Abgeschlossen</td>
</tr>
<tr>
<td>2</td>
<td>Encoder-Kalibrierung, /odom Publisher</td>
<td>◄── Aktuell</td>
</tr>
<tr>
<td>3</td>
<td>SLAM mit slam_toolbox</td>
<td>⬜ Offen</td>
</tr>
<tr>
<td>4</td>
<td>Nav2 autonome Navigation</td>
<td>⬜ Offen</td>
</tr>
<tr>
<td>5</td>
<td>Kamera + YOLOv8 auf Hailo</td>
<td>⬜ Offen</td>
</tr>
</tbody>
</table>
<h3 id="phase-2-aufgaben">Phase 2 Aufgaben</h3>
<ol type="1">
<li><strong>Encoder-Kalibrierung</strong> (10-Umdrehungen-Test)</li>
<li><strong>Odometrie auf ESP32</strong> berechnen</li>
<li><strong>Serial-Protokoll erweitern:</strong>
<code>ODOM:left_ticks,right_ticks,x,y,theta\n</code></li>
<li><strong>ROS 2 <code>/odom</code> Publisher</strong> in
Bridge-Node</li>
<li><strong>TF-Broadcast:</strong> <code>odom</code> →
<code>base_link</code></li>
</ol>
<hr />
<p><em>Aktualisiert: 2025-12-12 | Firmware: v0.3.0-serial | Git:
github.com/unger-robotics/amr-platform</em></p>
</div>
</body>
</html>
